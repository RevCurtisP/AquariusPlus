100 REM Sprite Flipping Demo
110 SET SPRITE * OFF:SCREEN 4:CLS 6,0
120 LOCATE 1,18
122 PRINT $"208F20";" Start"
124 PRINT $"9E208E";" Turn"
126 PRINT $"209F20";" Stop"
128 PRINT:PRINT " Q  Quit"
130 POKE $3801,' '

200 L0$=$"00000000":R0$=$"00000000":REM Vertical
201 L1$=$"00000008":R1$=$"08000000"
202 L2$=$"00000008":R2$=$"78000000"
203 L3$=$"08000007":R3$=$"17000008"
204 L4$=$"07000007":R4$=$"17000007"
205 L5$=$"08000007":R5$=$"17000008"
206 L6$=$"08000007":R6$=$"47000008"
207 L7$=$"08000006":R7$=$"46000008"
208 L8$=$"08000004":R8$=$"44000008"
209 L9$=$"087E7E84":R9$=$"448E7E78"
210 LA$=$"087E7E78":RA$=$"787E7E78"
211 LB$=$"08000E87":RB$=$"478E0008"
212 LC$=$"08000008":RC$=$"78000008"
213 LD$=$"00000080":RD$=$"00800000"
214 LE$=$"00000000":RE$=$"00000000"
215 LF$=$"00000060":RF$=$"00600000"
216 SET TILE 128 TO L0$+L1$+L2$+L3$+L4$+L5$+L6$+L7$
217 SET TILE 129 TO L8$+L9$+LA$+LB$+LC$+LD$+LE$+LF$
218 SET TILE 130 TO R0$+R1$+R2$+R3$+R4$+R5$+R6$+R7$
219 SET TILE 131 TO R8$+R9$+RA$+RB$+RC$+RD$+RE$+RF$

220 L0$=$"00000000":R0$=$"00000000":REM Horizontal
221 L1$=$"00088888":R1$=$"88878000"
222 L2$=$"00000770":R2$=$"00000000"
223 L3$=$"00000EE0":R3$=$"00000000"
224 L4$=$"00000770":R4$=$"00000000"
225 L5$=$"0000EEE0":R5$=$"00000000"
226 L6$=$"60808780":R6$=$"00000000"
227 L7$=$"00087844":R7$=$"67777880"
228 L8$=$"00007474":R8$=$"44111700"
229 L9$=$"00087844":R9$=$"67777880"
230 LA$=$"60808780":RA$=$"00000000"
231 LB$=$"0000EEE0":RB$=$"00000000"
232 LC$=$"00000770":RC$=$"00000000"
233 LD$=$"00000EE0":RD$=$"00000000"
234 LE$=$"00000770":RE$=$"00000000"
235 LF$=$"00088888":RF$=$"88878000"
236 SET TILE 132 TO L0$+L1$+L2$+L3$+L4$+L5$+L6$+L7$
237 SET TILE 133 TO L8$+L9$+LA$+LB$+LC$+LD$+LE$+LF$
238 SET TILE 134 TO R0$+R1$+R2$+R3$+R4$+R5$+R6$+R7$
239 SET TILE 135 TO R8$+R9$+RA$+RB$+RC$+RD$+RE$+RF$

240 L0$=$"00000800":R0$=$"00000000":REM Diagonal
241 L1$=$"00007000":R1$=$"00000800"
242 L2$=$"00080000":R2$=$"00008780"
243 L3$=$"00800000":R3$=$"00071800"
244 L4$=$"08700000":R4$=$"00717000"
245 L5$=$"87EE0000":R5$=$"07170000"
246 L6$=$"00E7E000":R6$=$"64700000"
247 L7$=$"007EE704":R7$=$"86000000"
248 L8$=$"000E7844":R8$=$"40000000"
249 L9$=$"00078784":R9$=$"00000000"
250 LA$=$"00787478":RA$=$"70000008"
251 LB$=$"60000787":RB$=$"EE000070"
252 LC$=$"0000087E":RC$=$"E7E00800"
253 LD$=$"00000700":RD$=$"7EE78000"
254 LE$=$"00000000":RE$=$"00780000"
255 LF$=$"00006000":RF$=$"00800000"
256 SET TILE 136 TO L0$+L1$+L2$+L3$+L4$+L5$+L6$+L7$
257 SET TILE 137 TO L8$+L9$+LA$+LB$+LC$+LD$+LE$+LF$
258 SET TILE 138 TO R0$+R1$+R2$+R3$+R4$+R5$+R6$+R7$
259 SET TILE 139 TO R8$+R9$+RA$+RB$+RC$+RD$+RE$+RF$

260 DEF TILELIST TV$ = 128,130:REM Vertical
262 DEF TILELIST TR$ = 132,134:REM Facing Right
264 DEF TILELIST TL$ = 134,132:REM Facing Left
266 DEF TILELIST TD$ = 136,138:REM Facing Up-Right
268 DEF TILELIST TF$ = 138,136:REM Facing Up-Left

270 DEF ATTRLIST AN$ = 8,8:REM Unflipped
272 DEF ATTRLIST AH$ = 10,10:REM Flipped Horizontally
274 DEF ATTRLIST AV$ = 12,12:REM Flipped Vertically
276 DEF ATTRLIST AF$ = 14,14:REM Horizontal & Vertical

280 DEF SPRITE S$=1,0,0;2,8,0
282 SET SPRITE S$ TILE TV$ ATTR AN$
284 X=153:Y=95
286 SET SPRITE S$ POS X,Y ON

290 FOR I=1 TO 8:READ DX(I),DY(I):NEXT
292 DATA 0,-2, 1,-1, 2,0, 1,1, 0,2, -1,1, -2,0, -1,-1
294 D=1:M=0:C=0:REM Direction, Moving Flag, Change

300 _LOOP:K=INKEY
305 IF K='Q' or K='q' THEN CLS:END
310 IF K THEN GOSUB _KEY
315 IF NOT M THEN GOTO _LOOP
320 SET SPRITE S$ POS X,Y
322 X=X+DX(D):IF X<0 OR X>319 THEN X=-319*(X<0)
324 Y=Y+DY(D):IF Y<0 OR Y>199 THEN Y=-199*(Y<0)
330 GOTO _LOOP

340 _KEY
342 IF K=143 THEN M=-1:REM Cursor Up
344 IF K=159 THEN M=0:REM Cursor Down 
346 IF K=142 THEN C=-1:D=D+1:IF D>8 THEN D=1:REM Cursor Right
348 IF K=158 THEN C=-1:D=D-1:IF D<1 THEN D=8:REM Cursor Left
350 IF NOT C THEN RETURN
351 IF D=1 THEN SET SPRITE S$ TILE TV$ ATTR AN$:RETURN
352 IF D=2 THEN SET SPRITE S$ TILE TD$ ATTR AN$:RETURN
353 IF D=3 THEN SET SPRITE S$ TILE TR$ ATTR AN$:RETURN
354 IF D=4 THEN SET SPRITE S$ TILE TD$ ATTR AV$:RETURN
355 IF D=5 THEN SET SPRITE S$ TILE TV$ ATTR AV$:RETURN
356 IF D=6 THEN SET SPRITE S$ TILE TF$ ATTR AF$:RETURN
357 IF D=7 THEN SET SPRITE S$ TILE TL$ ATTR AH$:RETURN
358 IF D=8 THEN SET SPRITE S$ TILE TF$ ATTR AH$:RETURN
359 RETURN

