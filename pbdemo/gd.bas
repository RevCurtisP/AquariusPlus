100 REM Tile Test (Arcade Gauntlet Level 1)
110 CLS
120 PRINT:PRINT "Gauntlet tilemap demo":PRINT
130 PRINT:PRINT "Requires plusBASIC v0.12q"
140 PRINT "and Aquarius+ System V0.17d"
170 PRINT:INPUT "Level (1-3)";L$
210 N$="gauntlet/level"+L$
220 LOAD N$+".pal",$3860
225 SET COLOR 1 TO PEEK$($3860,30)
230 LOAD N$+".map",@20,0
240 LOAD N$+".til",@20,4096
300 SET COLOR 0,15 TO 0
305 CLS 7,0
310 SCREEN 1+16+24:POKE $37FF,15:POKE $33FF,' '
315 FILL SCREEN (25,0)-(39,24) " ",7,15
320 POKE PEEK($3801),' '
325 SS=$3000+66:POKE SS,"Gauntlet Demo"
330 POKE SS+120,"  LEVEL   8"
332 POKE SS+160,"   WARRIOR"

350 POKE SS+520,$"06"+" 1 pxl right"
352 POKE SS+560,$"07"+" 1 pxl left"
354 POKE SS+600,$"08"+" 1 pxl up"
356 POKE SS+640,$"09"+" 1 pxl dowm"
360 POKE SS+680,"PgUp: 8 pxl up"
362 POKE SS+720,"PgDn: 8 pxl dn"
364 POKE SS+760,"Home: 8 pxl lf"
366 POKE SS+800,"End:  8 pxl rt"
370 POKE SS+880,"Q to quit."

400 TX=0:TY=0
405 SET TILEMAP OFFSET TX,TY
410 _LOOP:K=GETKEY
420 IF K=81 OR K=113 THEN SCREEN 0:STOP
430 TX=TX+(K=158 AND TX>0)-(K=142 AND TX<303)+8*(K=155 AND TX>7)-8*(K=154 AND TX<303)
440 TY=TY+(K=143 AND TY>0)-(K=159 AND TY<55)+8*(K=138 AND TY>7)-8*(K=139 AND TY<48)
450 SET TILEMAP OFFSET TX,TY
480 GOTO _LOOP

