<!DOCTYPE html []>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="author" content="MarkdownViewer++" />
    <title>releases.md</title>
    <style type="text/css">
            
/* Avoid page breaks inside the most common attributes, especially for exports (i.e. PDF) */
td, h1, h2, h3, h4, h5, p, ul, ol, li {
    page-break-inside: avoid; 
}

        </style>
  </head>
  <body>
    <h1 id="plusbasic-release-history">plusBASIC Release History</h1>
    <ul>
      <li>v0.23f (2024-09-13)
<ul><li>Added TILEOFFSET()</li><li>Changed <code>get_color_args</code> calls to <code>get_screen_colors</code> and remove <code>get_color_args</code> routine.</li><li>Changed <code>CLEAR COLOR</code> to <code>CLS COLOR {_fg_,_bg_}</code>.</li><li><code>CHR</code> and <code>ATTR</code> options to <code>COPY SCREEN TO...</code> and <code>COPY ... TO SCREEN</code>.</li><li>Wrote unit test <code>cs.baq</code> to test COPY SCREEN statements.</li><li>Modified <code>ss.baq</code> to use COPY SCREEN and enabled <code>OUT</code> port restrictions.</li></ul></li>
      <li>v0.23e (2024-09-07)
<ul><li>Fixed file_load_paged executing random code when loading files over 65535 bytes.</li><li>Added test to sl.baq for loading large files to paged RAM.</li></ul></li>
      <li>v0.23d (2024-09-06)
<ul><li>Fixed PEEKSCREEN() and PEEKCOLOR() for both 40 and 80 column mode</li><li>Refactored screen_read_byte, screen_write_byte, color_read_byte, and color_write_byte</li><li>Rewrote PEEKSCREEN$() PEEKCOLOR$(), color_read_string, and color_write_string</li><li>Added unit tests front end <code>au.baq</code> and unit test program <code>ps.baq</code></li></ul></li>
      <li>v0.23c (2024-09-01)
<ul><li>Enabled SET BREAK ON/OFF</li><li>Fixed PEEK$ Syntax error</li><li>Added ASC option to SAVE/LOAD PALETTE.</li><li>Added FAST option to COPY SCREEN TO ... and COPY ... TO SCEEN</li><li>Added <code>CLEAR COLOR</code></li><li>Fixed page_read_paged and page_write_paged to return next paged address</li><li>Fixed FILL TILEMAP out of bounds error checking</li><li>Added continuous chain option to unit tests</li></ul></li>
      <li>v0.23b (2024-08-28)
<ul><li>Added extended memory addressing (!long) to
<ul><li>COPY, COMPARE()</li><li>FILL BYTE, FILL WORD,</li><li>LOAD, SAVE</li><li>POKE, PEEK(), PEEK$(), DOKE, DEEK</li><li>PLAY SAMPLE</li></ul></li><li>Moved gfx/screen.asm to auxrom/screen.asm</li><li>Implemented COPY @page,address TO SCREEN</li><li>Fixed ARGS always returning 0,ARGS$() crashing system.</li><li>Fixed DIR returning wrong file size</li></ul></li>
      <li>v0.23a (2023-08-26)
<ul><li>Fixed LOAD BITMAP incorrectly loading 9192 byte legacy bitmaps.</li><li>Fixed unit test for legacy bitmaps</li></ul></li>
      <li>v0.23 (2024-08-25)
<ul><li>Fixed ptplay.bin not being loaded</li><li>Fixed RUN rom-files crashing system</li><li>Fixed LOAD FNKEY</li><li>Load pt3play.bin from SD card, then esp: if not found</li></ul></li>
      <li>v0.22y (2024-08-21)
<ul><li>Breaking changes
<ul><li><code>FILL {@page},address,oount,byte</code> is now <code>FILL BYTE {@page}, address, oount, byte</code></li><li><code>FILL {@page},address,oount,WORD integer</code> is now <code>FILL WORD {@page}, address, count, integer</code></li><li><code>LOAD COLOR</code> is now <code>LOAD SCREEN ATTR</code></li><li><code>LOAD DIR ... \*array</code> now loads filenames only</li><li><code>LOAD DIR ... *array$,BIN</code> replaces old <code>LOAD DIR ... \*array</code></li><li><code>SAVE filespec$,TOK</code> to <code>SAVE filespec$,BIN</code>.</li></ul></li><li>New statements and functions
<ul><li><code>APPEND filespec$,^var$</code></li><li><code>BIT(val,bit#)</code></li><li><code>COPY SCREEN TO @page,address</code></li><li><code>FILL COLORMAP</code></li><li><code>JOY$()</code></li><li><code>PT3FAST</code></li><li><code>SET FILE ERROR ON/OFF</code></li><li><code>SET PT3 FAST ON/OFF</code></li></ul></li><li>Updated statements and functions
<ul><li><code>ATN</code> implemented.</li><li><code>CLEAR CURSOR</code></li><li><code>FRE(_option_)</code><ul><li>-1 - Returns the number of bytes in memory not being used by BASlC as unsigned int.</li><li>0 - Returns the number of bytes in memory not being used by BASlC as signed int.</li><li>1 - Returns the total size of string space (as set by the first argument of CLEAR).</li><li>2 - Returns the top of BAexSIC memory (as set by the second argument of CLEAR).</li><li>"" - Garbage collect and return free string space</li></ul></li><li><code>INPUT (_col_,_row_),_minlen_,_maxlen_,INT _var_</code></li><li><code>LOAD CHRSET</code><ul><li>768 byte file loads to characters 32 to 127 (standard ASCII printable)</li><li>1024 byte file loads to characters 128 to 255 (high ASCII)</li><li>2048 byte file loads entire character set</li></ul></li><li><code>LOAD DIR ... *array$,ASC</code> loads formatted directory</li></ul></li><li>Operational changes
<ul><li><code>CLEAR</code>, <code>NEW</code>, and <code>RUN</code> close all files</li><li><code>LOAD filespec,@page,address</code> now load more than 64k</li><li><code>LOAD BITMAP</code> generates Error 49 if file size does not exactly match one of the supported formats.</li><li><code>LOAD</code> basic program sets FILE ERROR ON</li><li><code>LOAD</code> binary closes file</li><li>Renamed <code>Disk I/O error</code> to <code>I/O error</code></li></ul></li><li>Statements and functions now respecting SET FILE ERROR OFF
<ul><li><code>LOAD FNKEYS</code></li><li><code>SAVE/LOAD PALETTE</code></li><li><code>LOAD</code> string</li><li><code>LOAD</code> array</li><li><code>LOAD DIR</code></li><li><code>DEL</code></li><li><code>MKDIR</code></li><li><code>CD</code> and <code>CD$</code></li></ul></li><li>Bug fixes
<ul><li>Syntax error on <code>LOAD filespec$,@page :</code></li><li>Syntax error in <code>SET SPRITE ... PALETTE</code></li></ul></li><li>Added unit test front end <code>au.bas</code>, chained unit test programs</li><li>Updated unit test framework an unit tests</li><li>Restricted kernel page writes to not write past USER_END.</li><li>System IRQ handler now preserves all registers</li></ul></li>
      <li>v0.22x (2024-05-25)
<ul><li>Added LOAD TILESET and SAVE TILESET</li><li>Added SET CHRDEF, GETCHRDEF$(), and SAVE CHRSET</li><li>Fixed characters 128 - 255 of default character set being overridden</li><li>INPUT and READ now parse hexademical numbers</li><li>Added DIM var()=list, READ *var</li></ul></li>
      <li>v0.22w (2024-05-20)
<ul><li>Added WAIT, SET BREAK ON/OFF</li><li>Implemented RGB(), DEF USR</li><li>Added syntax OUT port,byte|string$;port,byte|string$...</li><li>Syntax {@page,}address,byte;... to POKE, POKE COLOR, POKE SCREEN, and DOKE</li></ul></li>
      <li>
        <ul>
          <li>^ operator string substition gives Missing or Too many operands errors.
v0.22v (2024-05-19)</li>
          <li>Added JOIN statement</li>
          <li>Added CLEAR *array</li>
          <li>All statements that write to multiple elements of string array, first zero out the array contents, then do a garbage collecion.</li>
          <li>Fixed DIM causes Syntax error after VARPTR()</li>
        </ul>
      </li>
      <li>v0.22u
<ul><li>Added string slicing in the form var$[pos] and var$[start TO end]</li><li>Added Bad range error</li><li>Fixed null string causing String too long error when used as an argument in % string substitution</li></ul></li>
      <li>v0.22t (2024-05-15)
<ul><li>Added PAD$ function</li></ul></li>
      <li>v0.22s (2024-05-13)
<ul><li>Added LOAD BITMAP and SAVE BITMAP</li></ul></li>
      <li>v0.22r (2024-05-12)
<ul><li>Added comments starting with apostrophe.</li><li>Fixed silent abort on duplicate line number in LOAD with ASC option.</li></ul></li>
      <li>v0.22q (2024-05-11)
<ul><li>Changed DEF TILE TO CHR to SET TILE TO CHR</li><li>Wrote demo program /pbdemo/chrsprite.bas</li></ul></li>
      <li>v0.22p (2024-05-10)
<ul><li>Added DEF TILE TO CHR and DEF BYTELIST</li></ul></li>
      <li>v0.22o (2024-05-09)
<ul><li>Implemented SAVE SCREEN and LOAD SCREEN statements</li></ul></li>
      <li>v0.22n (2024-05-08)
<ul><li>Added SPLIT command</li></ul></li>
      <li>v0.22m (2024-04-28)
<ul><li>Fixed spaces after escaped string being tokenized.</li></ul></li>
      <li>v0.22l (2024-04-21)
<ul><li>Added INMEM function</li><li>Fixed stomping of temporay string in string trimming functions functions.</li></ul></li>
      <li>v0.22k (2024-03-24)
<ul><li>Added SAVE filespec$,CAQ to override SET SAVE ASC and SAVE filespec$,TOK to save raw tokenized program.</li><li>Updated load_basic_program accordingly</li></ul></li>
      <li>v0.22j (2024-03-20)
<ul><li>Implemented COPY FILE</li></ul></li>
      <li>v0.22i (2024-03-20)
<ul><li>Removed LOAD STRING stub from source and README.md. Add LOAD and SAVE ^var$ to README.md.</li></ul></li>
      <li>v0.22h (2024-03-19)
<ul><li>Single PSET, PRESET, and POINT(), along with underlying routines.</li><li>Single FILL BITMAP and CLEAR BITMAP along with underlying routines.</li><li>Replaced SET BITMAP?? with COLOR, GETBITMAP?? with POSX, POSY, and COLOR</li><li>Bitmap routines use EXT_FLAGS bits to determine</li><li>Added DRAW token, USE SCREEN stub.</li></ul></li>
      <li>v0.22g (2024-03-11)
<ul><li>Added bitmap_read_sysvars, GETBITMAPBC, GETBITMAPBX, and GETBITMAPBY</li><li>Added bitmap_write_color, bitmap_write_xpos, bitmap_write_ypos, and SET BITMAPBC BITMAPBX BITMAPBY</li><li>Added bitmapc_read_sysvars, GETBITMAPCC, GETBITMAPCX, and GETBITMAPCY</li><li>PSETB, PRESETB, POINTB, PSETC, PRESETC, and POINTC update last-x and last-y system variables</li><li>Changed CLEAR BITMAP to CLEAR BITMAPB, matching syntax of other BITMAP keywords</li><li>Added bitmapc_write_color, bitmapc_write_xpos, bitmapc_write_ypos, and SET BITMAPCC BITMAPCX BITMAPCY</li><li>If PSETB color operand not specified, use color from SET BITMAPCC</li><li>Renamed and reorganized several module assembly language files</li><li>Added bitmap_move</li></ul></li>
      <li>v0.22f (2024-03-09)
<ul><li>Implemented PSETC, PRESETC, and POINTC</li><li>Fixed Y-coordinate clipping in PSETB, PRESETB, POTNTB</li></ul></li>
      <li>v0.22e (2024-03-09)
<ul><li>Implemented POINTB(), added CLEAR BITMAPC and FILL BITMAPC</li></ul></li>
      <li>v0.22d (2024-03-08)
<ul><li>Added CLEAR BITMAP, FILL BITMAP.</li><li>Implemented PSETB and PRESETB</li></ul></li>
      <li>v0.22c (2024-03-06)</li>
      <li>v0.22c (2024-03-06)
<ul><li>Fixed syntax error on extended functions VER through VARPTR</li></ul></li>
      <li>v0.22b (2024-03-04)
<ul><li>Added KEY(-1)</li></ul></li>
      <li>v0.22a (2024-03-04)
<ul><li>Added KEY("keys")</li></ul></li>
      <li>v0.22 (2024-03-04)
<ul><li>Added PT3STATUS, PT3LOOP, SET PT3 ON/OFF and fixed PAUSE PT3 while PT3 LOOP is active</li></ul></li>
      <li>v0.21z (2024-03-01)
<ul><li>Added pseudovariable ARGS and ARGS$(0)</li></ul></li>
      <li>v0.21y (2024-02-25)
<ul><li>Added SWAP VARS statement, ERASE statement, MID$ statement, and INDEX() function</li></ul></li>
      <li>v0.21x (2024-02-24)
<ul><li>Added TRIM$, TRIML$, and TRIMR$ functions</li></ul></li>
      <li>v0.21w (2024-02-21)
<ul><li>Added GETCHRSET function</li><li>Improved screen switch/swap</li><li>Fixed 80-column color mode printing</li><li>Tweaked Latin-1 character sets</li></ul></li>
      <li>v0.21v (2024-02-14)
<ul><li>Added LOAD DIR filename$,*array$</li><li>LOAD array$ ASC and LOAD DIR start at array index 1, put number of lines in index 0</li><li>Updated read/write page checking to match new memory structure</li></ul></li>
      <li>v0.21u (2024-02-13)
<ul><li>Added LOAD filename$,*array$,ASC</li></ul></li>
      <li>v0.21s (2024-02-13)
<ul><li>Implemented DEF FNx and FNx</li></ul></li>
      <li>v0.21r (2024-02-13)
<ul><li>Added function INSTR, kernel routine str_instr</li></ul></li>
      <li>v0.21q (2024-02-12)
<ul><li>Added VARPTR() and STRPTR()</li></ul></li>
      <li>v0.20p (2024-02-12)
<ul><li>Replaced SCREEN SAVE, SCREEN RESTORE, and SCREEN SWAP with STASH SCREEN, RESTORE SCREEN, and SWAP SCREEN.</li></ul></li>
      <li>v0.21o (2024-02-12)
<ul><li>Removed character ROM data from sysrom binary, makerom script now does a simple copy with concatenate</li></ul></li>
      <li>v0.21n (2024-02-11)
<ul><li>Fixed 'Unknown error' bug in SAVE paged binary over 32k in length</li></ul></li>
      <li>v0.21m (2024-02-11)
<ul><li>Added MOUSEW</li></ul></li>
      <li>v0.21j (2024-0209)
<ul><li>Added SAVE/LOAD string arrays</li></ul></li>
      <li>v0.21h (2024-02-05)
<ul><li>Modified legal write pages, PLAY SAMPLE allowed pages</li></ul></li>
      <li>v0.21g (2024-02-03)
<ul><li>Reactivated JP descramble_rom in files.asm</li></ul></li>
      <li>v0.21f (2024-02-03)
<ul><li>Loads ptplay.bin from ESP: instead of SD card</li></ul></li>
      <li>v0.21e (2024-01-31)
<ul><li>Added LOOP PT3 [filename]</li></ul></li>
      <li>v0.21c (2024-01-31)
<ul><li>Separated pt3player code into loadable module</li></ul></li>
      <li>v0.21b (2024-01-29)
<ul><li>Load default and Latin-1 character sets from ESP filesystem</li></ul></li>
      <li>v0.21a (2024-01-29)
<ul><li>Added USE CHRSET filename$, changed Ctrl-O to switch to custom chrset, removed Ctrl-P option</li></ul></li>
      <li>v0.21 (2024-01-27)
<ul><li>SYSROM loaded in pages 60 through 62 as SoftROM</li></ul></li>
      <li>v0.20w (2024-01-22)
<ul><li>Fixed tokenization bug when RUNing BASIC progam files in ASCII format</li></ul></li>
      <li>v0.20v (2024-01-21)
<ul><li>Fixed DEF SPRITE [...] x-offset bug</li></ul></li>
      <li>v0.20u (2024-01-18)
<ul><li>Added SET SPRITE var$ TILECLIP and debugged str_length</li></ul></li>
      <li>v0.20s (2024-01-17)
<ul><li>Added <code>GET/PUT TILEMAP ... ^var$</code>, debugged FILL <code>[@page,]address,WORD int</code>, fixed <code>ASC$()</code> bug.</li></ul></li>
      <li>v0.20r (2024-01-16)
<ul><li>Added TRON and TROFF statements and Extended BASIC jump table. Debugged graphics DEF statements.</li></ul></li>
      <li>v0.20q (2024-01-14)
<ul><li>Finalized esp, paged, dos, and file_io jump table entries</li></ul></li>
      <li>v0.20n (2024-01-13)
<ul><li>Added syntax <code>LIST$(NEXT)</code>, replaced all usage of <code>SBUFF</code> in paged memory with <code>STRBUF</code> in main memory</li></ul></li>
      <li>v0.20m (2024-01-11)
<ul><li>Added <code>FILL [@page,] start, count, |byte|WORD int|</code>,  <code>sys_fill_word</code>, tokens <code>VARS</code> and <code>WORD</code></li><li>Fixed spurious <code>FC error</code> in <code>GET SCREEN</code></li><li>Finished <code>GET TILEMAP</code>, <code>PUT_TILEMAP</code>, <code>tilemap_get</code>, and <code>tilemap_put</code></li></ul></li>
      <li>v0.20k (2024-01-08)
<ul><li>Implemented <code>SET TILEMAP (x,y)</code> and <code>tilemap_set_tile</code></li></ul></li>
      <li>v0.20j (2024-01-07)
<ul><li>Allow both <code>,</code> and <code>;</code> as delimiters in <code>DEF INTLIST</code></li><li>Fixed <code>ATTR attrs</code> and <code>PALETTE palette#</code> causing syntax error after <code>FILL TILEMAP tile#</code></li><li><code>.</code> treated as <code>0</code> in hex literal strings and <code>ASC$</code> function</li></ul></li>
      <li>v0.20i (2024-01-06)
<ul><li>Added BASIC functions <code>FILEEXT$()</code>, <code>FILEDIR$()</code>, <code>TRIMDIR$()</code>, <code>TRIMEXT$()</code></li><li>Added kernel routines <code>file_get_ext</code>, <code>file_trim_dir</code>, <code>file_get_dir</code>, <code>file_trim_ext</code></li><li>Allow unquoted filename operand for <code>RUN</code> in direct mode</li><li>Added direct mode syntax <code>DEL file file file...</code></li><li>Added syntax <code>LOAD filename$,@page</code> and <code>SAVE filename$,@page</code></li><li>Added cartridge diagnostic mode assembly option</li></ul></li>
      <li>v0.20h (2024-01-02)
<ul><li>Fixed 8k carts not working</li></ul></li>
      <li>v0.20g (2024-12-30)
<ul><li><code>FILL SCREEN</code>, <code>GET SCREEN</code>, <code>PUT SCREEN</code> now work in both 40 column and 80 column mode</li></ul></li>
      <li>v0.20f (2024-12-30)
<ul><li>Added optional comma between end-coordinate and fill character in <code>FILL SCREEN</code></li></ul></li>
      <li>v0.20e (2024-12-29)
<ul><li>Added <code>KEY()</code> function</li></ul></li>
      <li>v0.20d (2024-12-29)
<ul><li>Added <code>DEC()</code> function, fixed <code>esp_get_version</code>/<code>VER(0)</code>/<code>VER$(0)</code></li></ul></li>
      <li>v0.20c (2024-12-23)
<ul><li>Refactored (and hopefully fixed) cartridge boot code</li></ul></li>
      <li>v0.20b (2024-12-17)
<ul><li>Fixed bug in init_charram</li></ul></li>
      <li>v0.20a (2024-12-17)
<ul><li>Clear BASIC RAM before starting cart. Add IRQ and hook disable, screen reset to hardware cart startup</li></ul></li>
      <li>v0.20u (2024-12-14)
<ul><li>Fixed GETPALETTE$, modded file_load_pt3 to stop any running pt3play process</li></ul></li>
      <li>v0.19t (2024-12-13)
<ul><li>Replaced RESET PT3 with STOP PT3, added PAUSE PT3 and RESUME PT3</li></ul></li>
      <li>v0.19s (2024-12-12)
<ul><li>Fixed CLS when SET COLOR is active</li></ul></li>
      <li>v0.19r (2024-12-12)
<ul><li>Fixed PLAY PT3 and RESET PT3</li></ul></li>
      <li>v0.19q (2024-12-13)
<ul><li>PLAY PT3 fixes</li></ul></li>
      <li>v0.19p (2024-12-11)
<ul><li>implemented PT3 PLAY</li></ul></li>
      <li>v0.19n (2024-12-08)
<ul><li>Added LOAD PALLETE, SAVE PALETTE, RESET PALETTE and RESET SCREEN</li></ul></li>
      <li>v0.19m (2024-12-08)
<ul><li>Fixed routine screen_pos_addr which had broken GET SCREEN and PUT SCREEN</li><li>Implemented LOAD PT3 statement</li></ul></li>
      <li>v0.19j (2024-12-04)
<ul><li>Fixed printing to screen after SET COLOR</li></ul></li>
      <li>v0.19i (2024-12-03)
<ul><li>Converted plusBASIC patches to hooks to increase cartridge compatibility</li></ul></li>
      <li>v0.19h (2024-12-02)
<ul><li>Fixed ?Syntax error when RUNning ROM</li></ul></li>
      <li>v0.19g (2024-12-01)
<ul><li>Added SET SAVE ASC ON/OFF, preset DAC to $80 to eliminate click at begining of first sample</li></ul></li>
      <li>v0.19f (2024-11-29)
<ul><li>Fixed bank 1 not restored after, clicking in play_sample</li></ul></li>
      <li>v0.19e (2024-11-28)
<ul><li>Moved Extended BASIC hook routines into Bank 1 ROM</li></ul></li>
      <li>v0.19d (2024-11-27)
<ul><li>Moved dos and fileio modules into Aux ROM</li></ul></li>
    </ul>
  </body>
</html>
