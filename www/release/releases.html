<!DOCTYPE html []>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="author" content="MarkdownViewer++" />
    <title>releases.md</title>
    <style type="text/css">
            
/* Avoid page breaks inside the most common attributes, especially for exports (i.e. PDF) */
td, h1, h2, h3, h4, h5, p, ul, ol, li {
    page-break-inside: avoid; 
}

        </style>
  </head>
  <body>
    <h1 id="plusbasic-release-history">plusBASIC Release History</h1>
    <!--ToDo: Add entries between v0.18x and v0.13h-->
    <ul>
      <li>v0.27g (2025-09-12)
<ul><li><code>SAVE SCREEN</code><em>file_save_screen</em> now defaults to writing only Screen RAM and Color RAM.</li><li>Added trailing options <code>PALETTE</code> and <code>BORDERMAP</code> to <code>SAVE SCREEN</code> and write options parameter to <em>file_save_screen</em></li><li>Remap border byte is now written as either <code>$00</code> or <code>$FF</code></li><li>Add unit tests to <em>ss.bas</em></li></ul></li>
      <li>v0.27f (2025-09-09)
<ul><li>Added <code>SET SOUND FAST ON/OFF</code>, <code>GETSOUNDFAST</code>, <em>set_soundfast</em>, and <em>get_soundfast</em></li><li>Deleted deprecated include file <em>sbasic.inc</em></li><li>Removed spurious label <em>gfx_jump_table</em> causing corrupted <em>aqplus.inc</em> and <em>aqplus_asm.inc</em> to be generated</li><li>Renamed <em>screen_read_string</em> and <em>screen_write_string</em> to <em>screen_read_bytes</em>, <em>screen_write_bytes</em></li><li>Renamed <em>color_read_string</em> and <em>color_write_string</em> to <em>color_read_bytes</em>, <em>color_write_bytes</em></li></ul></li>
      <li>v0.27e (2025-08-31)
<ul><li>Moved bit flags <code>GFXM_TEXT</code>,<code>GFXM_WIDE</code>,<code>GFXM_1BPP</code>, and<code>GFXM_4BPP</code> to new system variable <code>GFX_FLAGS</code></li></ul></li>
      <li>v0.27d (2025-08-21)
<ul><li>Fixed Ctrl-C during <code>INPUT</code> not causing <code>BREAK</code></li></ul></li>
      <li>v0.27c (2025-08-21)
<ul><li>Added <em>page_call</em> to kernel jump table</li><li>Removed extended palette modes from <em>file_load_palette</em> and <em>file_save_palette</em></li><li>Removed <code>ASC</code>/<code>HEX</code>/<code>RGB</code> mode from <code>SAVE PALETTE</code> and <code>LOAD PALETTE</code>\</li><li>Added argument format <code>RRGGBB</code>  to <code>RGB$()</code></li></ul></li>
      <li>v0.27b (2025-07-07)
<ul><li>Added file types <code>hex</code> and <code>rgb</code> to <em>file_load_palette</em> and <em>file_save_palette</em></li><li>Added <code>,HEX</code> and <code>,RGB</code> options to <code>LOAD PALETTE</code> and <code>SAVE PALETTE</code></li><li>Added function <code>FGBDEC$()</code></li><li>Moved <code>LOAD PALETTE</code> and <code>SAVE PALETTE</code> to <em>sp.baq</em> and added tests for <code>HEX</code>, <code>ASC</code>, and <code>RGB</code></li><li>Refactored only <code>call gfx_call_inline</code> and removed routine <em>gfx_call_inline</em></li></ul></li>
      <li>v0.27a (2025-05-25)
<ul><li>Renamed <em>ptrget_hook</em> to <em>ptrget_ext</em> and moved to AuxROM, with stub in SysROM</li><li>Changed <em>trap_error</em> and <em>ptrget_ext</em> from jump table entries to direct calls</li><li>Added tokens <code>RAN</code> and <code>DOM</code></li><li>Changed <code>OPEN var TO filespec$ FOR mode</code> to <code>OPEN filespec$ FOR mode AS var</code></li><li>Debugged <em>dos_open_random</em>, <em>write_file</em>,</li><li>Implemented <em>dos_tell</em>, <code>FILEPOS()</code>, and <code>SET FILE .. POS TO ...</code></li><li>Moved <code>OPEN</code> core code to AuxROM and implemented mode <code>RANDOM</code> in <code>OPEN</code></li><li>Added (not debugged) statement <code>PUT CHR</code> and kernel routine <em>page_skip_write</em></li><li>Moved plusBASIC extended error calls to now deprecated <code>STMDSP</code></li><li>Fixed error on hex digits <code>A</code>-<code>F</code> in aux_cvt_hex</li></ul></li>
      <li>v0.25e (2025-05-19)
<ul><li>Fixed ".dev" minor version evaluation in <em>version_to_long</em></li><li>Moved <code>VER()</code> and <code>VER$()</code> core code to auxiliary ROM</li><li>Modified <em>s3_string_ext</em> and wrapped in <em>aux_call</em></li></ul></li>
      <li>v0.25d (2025-05-18)
<ul><li>Fixed <em>Type mismatch error</em> in <code>BYTE()</code></li><li>Added function <code>CHECKDIR()</code> and kernel routine <em>file_check_ver</em></li><li>Hex literals, <code>DEC()</code> and <code>HEX$()</code> now support longs</li><li>Added statement <code>CHECK VER</code></li><li><code>VER()</code> evaluates <code>.dev</code> as higher than <code>.99</code> (the current highest major or minor version number)</li><li>Renamed kernel routines and moved to Auxiliary ROM
<ul><li><em>esp_get_version</em> to <em>get_system_version</em></li><li><em>sys_ver_plusbasic</em> to get_plusbas_version</li><li><em>sys_num_ver</em> to <em>version_to_long</em></li></ul></li><li>Moved utility routines <em>asc_to_bcd</em>, <em>bcd_to_bin</em>, and <em>mult_hl_10</em>  from System ROM to Auxiliary</li><li>Refactored routines <em>s3_ctrl_keys</em>, s3_stuffh_ext_, <em>s3_string_ext</em> to be used with <em>aux_call</em></li><li>Added jump table address to comments in <em>kernel.asm</em> to verify that the jump points don't accidentally change</li></ul></li>
      <li>v0.25c (2025-05-04)
<ul><li>Replaced bit flags <code>BASCHRMOD</code> and <code>BASCHRMOD</code> in <code>BASYSCTL</code> with <code>SCRCHRMOD</code> and <code>SCRCHRMOD</code> in <code>SCREENCTL</code></li></ul></li>
      <li>v0.25b (2025-05-03)
<ul><li>Replaced all calls to <em>float_signed_byte</em> with calls to <em>FLOAT</em>, removed <em>float_signed_byte</em></li><li>Renamed labels <code>FN_PT3</code>, <code>PT3_BUFFR</code>, <code>PT3_LOOPS</code>, <code>PT3TK</code>, <code>ST_LOOP_PT3</code>, <code>ST_PAUSE_PT3</code>, <code>ST_PLAY_PT3</code>, <code>ST_RESUME_PT3</code>,
<code>ST_SET_PT3</code>, <code>ST_STOP_PT3</code>, and <code>_play_pt3</code>
with <code>FN_TRACK</code>, <code>TRK_BUFFR</code>, <code>TRK_LOOPS</code>, <code>TRKTK</code>, <code>ST_LOOP_TRACK</code>, <code>ST_PAUSE_TRACK</code>, <code>ST_PLAY_TRACK</code>, <code>ST_RESUME_TRACK</code>,
<code>ST_SET_TRACK</code>, <code>ST_STOP_TRACK</code>, <code>__play_track</code></li></ul></li>
      <li>v0.25a (2025-04-30)
<ul><li>Fixed <code>Illegal quantity error</code> in <code>DEF SPRITE (rows,columns),spritle</code></li><li>Added functions <code>CURSOROFFSET</code>, <code>CURSORX</code>, <code>CURSORY</code></li><li>Moved bit flag <em>SCRCOLOR</em> from <em>BASYSCTL</em> to <em>SCREENCTL</em></li><li>Added unit tests to <em>sg.bas</em> (screen graphics)</li></ul></li>
      <li>v0.25 (2025-04-23)
<ul><li>Forked <em>s3basic.asm</em> to plusBASIC specific <em>sbasic.asm</em> and inlined into <em>aqplusbas.asm</em></li><li>Renamed macro <code>SYNCHK</code> to <code>SYNCHKC</code>, added <code>SYNCHKT</code></li><li>Refactored <code>rst SYNCHKC</code> calls to <code>SYNCHKC</code> or <code>SYNCHKT</code></li></ul></li>
      <li>v0.24l (2025-04-15)
<ul><li>Implemented AqExec load to and run from paged RAM</li><li>Added paged RAM destination to <code>CALL</code></li><li>Fixed <code>PUT SCREEN</code> generating <em>Illegal quantity error</em></li><li>Replaced UDF hook in <code>ATN</code> with direct jump</li><li>Replaced UDF hooks in <code>OUTDO</code> and <code>TTYCHR</code>/<code>TTYCH</code> with direct jump. Moved hook code from AuxROM to SysROM</li><li>Ensured that Extended ROM is paged in for direct jumps that replaced UDF hooks</li></ul></li>
      <li>v0.24k (2025-04-07)
<ul><li>Updated <code>AQPLUS</code> Resource file chunk header formet and AqExec example <em>asm/hello.asm</em></li><li>Implemented RUNing AqExec programs</li><li>Refactored <code>LINE INPUT</code> code</li><li>Fixed <code>PLAY SAMPLE</code> and ^G warm boot infinite loop</li><li><code>print_string_immd</code> now preserves HL</li><li>Updated <em>makeinc.py</em> and regenerated assembly include files</li></ul></li>
      <li>v0.24j (2025-03-28)
<ul><li>SAVE routines no longer close all files</li><li>Fixed <code>OPEN</code>, <code>FILEATTR()</code>, <code>READ KEYS</code></li><li>Added <code>OPEN ... APPEND</code>, <code>CLOSE #channel</code>, <code>READ #channel,var$,length</code>, <code>WRITE #channel,^var$</code></li><li>Moved <code>play_sample</code> to auxiliary ROM, add <code>play_sample</code> to kernel jump table</li><li>Temporarily disable turbo mode during <code>Ctrl-G</code> beep and <code>PLAY SAMPLE</code></li><li>Replaced assembly routine <code>GET_STRING</code> with <code>FRMSTR</code>, added routine <code>PARSTR</code></li><li>Replaced calls to:
<ul><li><code>FRMEVL</code>+<code>CHKSTR</code> with <code>FRMSTR</code></li><li><code>FRMPRN</code>+<code>GETYPE</code> with <code>FRMPRT</code></li><li><code>PARCHK</code>+<code>CHKSTR</code> with <code>PARSTR</code></li></ul></li><li>Renamed <em>fileaux.asm</em> to <em>filemisc.asm</em></li></ul></li>
      <li>v0.24i (2025-03-27)
<ul><li>Replaced UDF hooks 0, 35 through 45 with direct jumps</li><li>Deleted deprecated routine <code>aux_rom_call</code></li></ul></li>
      <li>v0.24h (2025-03-26)
<ul><li>Moved <code>FN_KEY</code> and <code>FN_MOUSE</code> core code into auxiliary ROM</li><li>Renamed kernel routine <code>key_read_ascii</code> to <code>key_read</code> and removed kernel routine stub <code>key_read_scan_code</code></li><li>Moved kernel routines <code>key_clear_fifo</code>, <code>key_read</code>, and <code>key_set_keymode</code> from <em>keyread.asm</em> to <em>aqplusbas.asm</em></li><li>Moved kernel routine <code>key_pressed</code> from <em>keyread.asm</em> to <em>auxrom/misc.asm</em> and deleted file <em>keyread.asm</em></li><li>Modified <code>FN_KEY</code> to take string of keycodes instead of ASCII codes and return position in string of key pressed</li><li>Added <code>REPEAT</code> and <code>UNTIL</code> tokens, <code>PAUSE UNTIL</code> statement, kernel routine <code>bool_setbit_long</code></li></ul></li>
      <li>v0.24g (2025-03-16)
<ul><li>Renamed and added <code>JOYx()</code> functions. Allowed controller id as argument to <code>JOYxx()</code> functions</li></ul></li>
      <li>v0.24f (2025-03-10)
<ul><li>Added <code>OFFSET()</code></li><li>Moved <code>move_cursor</code> into AuxROM, split screen offset calculation code into <code>cursor_offset</code>.</li><li>Moved <code>DATE</code>+<code>TIME</code>, <code>MOUSEx</code>, <code>JOIN</code>, and <code>SPLIT</code> core code into AuxROM.</li></ul></li>
      <li>v0.24e (2025-03-08)
<ul><li>Key read logic rewritten to mimic original INKEY$ logic</li><li>Added <code>CLEAR KEYS</code> statement, <code>%</code> binary numeric literals</li><li><code>UPRKEY</code>, <code>UPRKEY$</code>, <code>LWRKEY</code>, and <code>LWRKEY$</code> no longer wait for a keypress</li><li>Added <code>JOYB()</code>, <code>JOYD()</code>, <code>JOYK()</code>, <code>JOYP()</code>, and <code>JOYxx()</code> functions</li></ul></li>
      <li>v0.24d (2025-02-27)
<ul><li>Added <code>INC var</code> and <code>DEC var</code></li><li>Fixed <code>ERASE *array</code></li><li>Added <code>String length</code> error</li><li>Added <code>RESET SPRITE</code> with <code>Empty string</code> and <code>String length</code> errors</li><li>Fixed <code>Syntax arror</code> on negative numbers after <code>DIM var()=</code></li><li>Moved <code>_get_rgb</code> core code and <code>sprite_set_pos</code> from Extended ROM to Auxiliary ROM</li></ul></li>
      <li>v0.24c (2025-02-17)
<ul><li>Added <code>DEF SPRITE def$=(cols,rows),spritle</code></li><li>Fixed SET FNKEY rebooting when string is too long</li></ul></li>
      <li>v0.24b (2025-02-16)
<ul><li>Fixed <code>SET TILE TO CHR</code> statement</li><li>Added <code>SET TILE *array$</code></li><li>Added <code>DEF SPRITE def$=^var$</code>, unimplemented <code>DEF SPRITE def$=(w,h),s</code></li><li><code>SET SPRITE</code> generates <em>Empty string error</em> if spritedef = ""</li><li>Removed undocumented <code>OPEN()</code> function</li><li>Moved <em>GETYPE</em> into, added <em>FRMTYP</em>, <em>FRMPRS</em>, <em>FRMPRT</em>, <em>PARTYP</em>, <em>FRMSTR</em> to S3BASIC</li><li>Removed routines <em>parchk_getype</em>, <em>frmeval_getype</em>, <em>skip_frmprn_getype</em>, <em>skip_frmprn_getyp</em>, <em>frmprn_getype</em></li><li><code>parse_colors</code> generates <em>Missing Operand</em> error instead of <em>Syntax error</em></li><li>Added routines <em>get_strbuf_addr_no_bc</em>, <em>fretms_addr_len</em></li></ul></li>
      <li>v0.24a (2025-02-09)
-Fixed display of plusBASIC version on boot screen</li>
      <li>v0.24 (2025-02-09)
<ul><li>Color cycle screen skipped if <code>/system/plusbasic/_skipsplash</code> exists</li><li><code>DEF ATTRLIST</code> now allows string operands.</li><li>Changed all internal graphic kernel calls to use gfx_call instead of aux_call</li><li>Moved ST_SPLIT core code into <code>basicaux.asm</code></li><li>Added tests to aqpunit/sg.bas and linked into test chain</li><li>Changed aqpunit/sx.bas to match plusBASIC last user page change</li></ul></li>
      <li>v0.23u (2025-02-02)
<ul><li>Fixed PAD$() overwriting string variables</li><li>Added <code>PRINT @()</code>, <code>SET CURSOR ON/OFF</code>, <code>GETCURSOR</code></li><li>Added <code>SET BORDER CHR/COLOR</code>, <code>RESET BORDER</code></li><li>Added <code>GETBORDERCHR</code>, <code>GETBORDERCHR$</code>, <code>GETBORDERCOLOR</code>, <code>GETBORDERCOLOR$</code></li></ul></li>
      <li>v0.23t (2025-02-01)
<ul><li>Added DUMP VARS</li></ul></li>
      <li>v0.23s (2025-01-26)
<ul><li>Implemented <code>UPR()</code>, <code>UPR$()</code>, <code>LWR()</code>, <code>LWR$()</code>, <code>UPRKEY</code>, <code>UPRKEY$</code>, <code>LWRKEY</code>, <code>LWRKEY$</code></li><li>Implemented <code>BIT(string,bit#)</code></li><li>Added <code>LONG()</code>, <code>LONG$()</code>, <code>FLOAT()</code>, <code>FLOAT$()</code></li><li><code>INKEY</code>. <code>INKEY$</code>, <code>GETKEY</code>, <code>GETKEY$</code> now respect <code>SET BREAK OFF</code></li><li>Fixed errors in <code>TRIMDIR$</code> and <code>TRIMEXT$</code></li><li>Fixed bug in <code>RGB()</code> and <code>RGB$()</code> with string argument</li></ul></li>
      <li>v0.23r (2024-12-14)
<ul><li>Added <code>PAD$(number,...)</code> where number is converted to string before padding</li><li><code>DEF RGBLIST</code>, <code>RGB()</code>, and <code>RGB$()</code> now accept 3 byte binary string of 8-bit R,G,B values</li><li>Added <code>LEN(*array)</code> which returns length in bytes of data portion of array.</li><li>Added <code>COPY *array TO ...</code>, <code>COPY ... TO *array</code>, and <code>COPY *array TO *array</code></li><li>ROM load routine executes <code>esp:boot.bin</code> instead of <code>/boot/bin</code></li></ul></li>
      <li>v0.23q (2024-11-29)
<ul><li>Removed <code>SGNINT()</code>, added <code>INT(string$)</code> and <code>INT(string$,offset)</code></li><li><code>RGB()</code>, <code>RGB$()</code>, and <code>DEF RGBLIST</code> now accept 8-bit RGB binary string operands</li></ul></li>
      <li>v0.23p (2024-11-28)
<ul><li><code>SET BREAK OFF</code> causes Ctrl-C to not BREAK out of INPUT</li><li>Syntax <code>OUT! port,byte</code> allows writing to protected I/O ports</li><li>boot.bin modified to identify and execute alternate BASIC ROMs</li><li>Implemented <code>SGNINT()</code> function</li></ul></li>
      <li>v0.23o (2024-10-27)
<ul><li>SET BREAK OFF disables key checks between BASIC statements</li><li>Fixed Ctrl-D, Ctrl-F, Ctrl-U turbo mode selection</li><li>plusBASIC now executes ROM images via boot.bin</li><li>Set S3 BASIC internal revision date to same as S1/S2</li><li>Removed sys_ver_s3basic and S3BASIC option from <code>VER()</code> and <code>VER()</code></li></ul></li>
      <li>v0.23n (2024-10-25)
<ul><li>Added statement <code>SET TRACK SPEED herz</code> and function <code>TRACKSPEED</code></li><li>Added Ctrl-U sets Unlimited Turbo while program is running</li><li>Copied JOY() assembly code to AuxROM routine <code>read_gamepad</code></li><li>Embedded SYSROM filename at $2FF0</li></ul></li>
      <li>v0.23m (2024-10-21)
<ul><li>Implemented <code>PAUSE jiffies</code></li><li>Added <code>DEF USRINT</code>, <code>SET USRINT ON/OFF</code></li></ul></li>
      <li>v0.23l (2024-10-20)
<ul><li>Added statement <code>SET SPEED</code> and function <code>GETSPEED</code></li></ul></li>
      <li>v0.23k (2024-10-19)
<ul><li>Breaking change
<ul><li>Keyword <code>PT3</code> has been changed to <code>TRACK</code></li></ul></li><li><code>READ *var$</code> now parses quoted strings correctly.</li><li>DIM <code>var$(...)=</code> requires quoted strings unless string is empty</li></ul></li>
      <li>v0.23j (2024-10-18)
<ul><li>Breaking changes
<ul><li><code>FILL BITMAP BYTE</code> is now <code>FILL BITMAP BYTES</code></li><li><code>FILL BYTE</code> is now <code>FILL BYTES</code></li><li><code>FILL WORD</code> is now <code>FILL WORDS</code></li></ul></li><li>Added BYTE(), WORD(), and WORD$() functions</li><li>S3 BASIC CONINT routine now allows signed numbers (-256 through 255)</li><li>Fixed DEC() Overflow error when argument is not a literal string</li><li>Fixed ASC$() corrupting argument contents</li><li>var$[...] now returns a temporary so that FRETOP won't get clobbered</li></ul></li>
      <li>v0.23i (2024-10-09)
<ul><li>Added ATTR(), ATTR$()</li><li>Implemented GETCOLOR</li></ul></li>
      <li>v0.23h (2024-09-23)
<ul><li>Added ENDKEY, FILESTATUS$(), FILEDATETIME$(), FILEATTR(), and FILELEN()</li><li>Added optional position argument to ASC()</li><li>Modified enhanced INPUT to exit on Ctrl-X, Tab, Back-Tab, Cursor-Up, and Cursor-Down</li></ul></li>
      <li>v0.23g (2024-09-18)
<ul><li>Fixed get_byte 64 which was causing DEF SPRITE to error on spritle 63</li><li>Added PAD token to bas2baq.py and baq2bas.py</li><li>Added AqExec file support to RUN file</li></ul></li>
      <li>v0.23f (2024-09-13)
<ul><li>Added TILEOFFSET()</li><li>Changed <code>get_color_args</code> calls to <code>get_screen_colors</code> and remove <code>get_color_args</code> routine</li><li>Changed <code>CLEAR COLOR</code> to <code>CLS COLOR {_fg_,_bg_}</code></li><li><code>CHR</code> and <code>ATTR</code> options to <code>COPY SCREEN TO...</code> and <code>COPY ... TO SCREEN</code></li><li>Wrote unit test <code>cs.baq</code> to test COPY SCREEN statements</li><li>Modified <code>ss.baq</code> to use COPY SCREEN and enabled <code>OUT</code> port restrictions</li></ul></li>
      <li>v0.23e (2024-09-07)
<ul><li>Fixed file_load_paged executing random code when loading files over 65535 bytes</li><li>Added test to sl.baq for loading large files to paged RAM</li></ul></li>
      <li>v0.23d (2024-09-06)
<ul><li>Fixed PEEKSCREEN() and PEEKCOLOR() for both 40 and 80 column mode</li><li>Refactored screen_read_byte, screen_write_byte, color_read_byte, and color_write_byte</li><li>Rewrote PEEKSCREEN$() PEEKCOLOR$(), color_read_string, and color_write_string</li><li>Added unit tests front end <code>au.baq</code> and unit test program <code>ps.baq</code></li></ul></li>
      <li>v0.23c (2024-09-01)
<ul><li>Enabled SET BREAK ON/OFF</li><li>Fixed PEEK$ Syntax error</li><li>Added ASC option to SAVE/LOAD PALETTE.</li><li>Added FAST option to COPY SCREEN TO ... and COPY ... TO SCEEN</li><li>Added <code>CLEAR COLOR</code></li><li>Fixed page_read_paged and page_write_paged to return next paged address</li><li>Fixed FILL TILEMAP out of bounds error checking</li><li>Added continuous chain option to unit tests</li></ul></li>
      <li>v0.23b (2024-08-28)
<ul><li>Added extended memory addressing (!long) to
<ul><li>COPY, COMPARE()</li><li>FILL BYTE, FILL WORD,</li><li>LOAD, SAVE</li><li>POKE, PEEK(), PEEK$(), DOKE, DEEK</li><li>PLAY SAMPLE</li></ul></li><li>Moved gfx/screen.asm to auxrom/screen.asm</li><li>Implemented COPY @page,address TO SCREEN</li><li>Fixed ARGS always returning 0,ARGS$() crashing system.</li><li>Fixed DIR returning wrong file size</li></ul></li>
      <li>v0.23a (2024-08-26)
<ul><li>Fixed LOAD BITMAP incorrectly loading 9192 byte legacy bitmaps.</li><li>Fixed unit test for legacy bitmaps</li></ul></li>
      <li>v0.23 (2024-08-25)
<ul><li>Fixed ptplay.bin not being loaded</li><li>Fixed RUN rom-files crashing system</li><li>Fixed LOAD FNKEY</li><li>Load pt3play.bin from SD card, then esp: if not found</li></ul></li>
      <li>v0.22y (2024-08-21)
<ul><li>Breaking changes
<ul><li><code>FILL {@page},address,oount,byte</code> is now <code>FILL BYTE {@page}, address, oount, byte</code></li><li><code>FILL {@page},address,oount,WORD integer</code> is now <code>FILL WORD {@page}, address, count, integer</code></li><li><code>LOAD COLOR</code> is now <code>LOAD SCREEN ATTR</code></li><li><code>LOAD DIR ... \*array</code> now loads filenames only</li><li><code>LOAD DIR ... *array$,BIN</code> replaces old <code>LOAD DIR ... \*array</code></li><li><code>SAVE filespec$,TOK</code> to <code>SAVE filespec$,BIN</code>.</li></ul></li><li>New statements and functions
<ul><li><code>APPEND filespec$,^var$</code></li><li><code>BIT(long,bit#)</code></li><li><code>COPY SCREEN TO @page,address</code></li><li><code>FILL COLORMAP</code></li><li><code>JOY$()</code></li><li><code>PT3FAST</code></li><li><code>SET FILE ERROR ON/OFF</code></li><li><code>SET PT3 FAST ON/OFF</code></li></ul></li><li>Updated statements and functions
<ul><li><code>ATN</code> implemented.</li><li><code>CLEAR CURSOR</code></li><li><code>FRE(_option_)</code><ul><li>-1 - Returns the number of bytes in memory not being used by BASlC as unsigned int.</li><li>0 - Returns the number of bytes in memory not being used by BASlC as signed int.</li><li>1 - Returns the total size of string space (as set by the first argument of CLEAR).</li><li>2 - Returns the top of BAexSIC memory (as set by the second argument of CLEAR).</li><li>"" - Garbage collect and return free string space</li></ul></li><li><code>INPUT (_col_,_row_),_minlen_,_maxlen_,INT _var_</code></li><li><code>LOAD CHRSET</code><ul><li>768 byte file loads to characters 32 to 127 (standard ASCII printable)</li><li>1024 byte file loads to characters 128 to 255 (high ASCII)</li><li>2048 byte file loads entire character set</li></ul></li><li><code>LOAD DIR ... *array$,ASC</code> loads formatted directory</li></ul></li><li>Operational changes
<ul><li><code>CLEAR</code>, <code>NEW</code>, and <code>RUN</code> close all files</li><li><code>LOAD filespec,@page,address</code> now load more than 64k</li><li><code>LOAD BITMAP</code> generates Error 49 if file size does not exactly match one of the supported formats.</li><li><code>LOAD</code> basic program sets FILE ERROR ON</li><li><code>LOAD</code> binary closes file</li><li>Renamed <code>Disk I/O error</code> to <code>I/O error</code></li></ul></li><li>Statements and functions now respecting SET FILE ERROR OFF
<ul><li><code>LOAD FNKEYS</code></li><li><code>SAVE/LOAD PALETTE</code></li><li><code>LOAD</code> string</li><li><code>LOAD</code> array</li><li><code>LOAD DIR</code></li><li><code>DEL</code></li><li><code>MKDIR</code></li><li><code>CD</code> and <code>CD$</code></li></ul></li><li>Bug fixes
<ul><li>Syntax error on <code>LOAD filespec$,@page :</code></li><li>Syntax error in <code>SET SPRITE ... PALETTE</code></li></ul></li><li>Added unit test front end <code>au.bas</code>, chained unit test programs</li><li>Updated unit test framework an unit tests</li><li>Restricted kernel page writes to not write past USER_END.</li><li>System IRQ handler now preserves all registers</li></ul></li>
      <li>v0.22x (2024-05-25)
<ul><li>Added LOAD TILESET and SAVE TILESET</li><li>Added SET CHRDEF, GETCHRDEF$(), and SAVE CHRSET</li><li>Fixed characters 128 - 255 of default character set being overridden</li><li>INPUT and READ now parse hexademical numbers</li><li>Added DIM var()=list, READ *var</li></ul></li>
      <li>v0.22w (2024-05-20)
<ul><li>Added WAIT, SET BREAK ON/OFF</li><li>Implemented RGB(), DEF USR</li><li>Added syntax OUT port,byte|string$;port,byte|string$...</li><li>Syntax {@page,}address,byte;... to POKE, POKE COLOR, POKE SCREEN, and DOKE</li></ul></li>
      <li>
        <ul>
          <li>^ operator string substition gives Missing or Too many operands errors.
v0.22v (2024-05-19)</li>
          <li>Added JOIN statement</li>
          <li>Added CLEAR *array</li>
          <li>All statements that write to multiple elements of string array, first zero out the array contents, then do a garbage collecion.</li>
          <li>Fixed DIM causes Syntax error after VARPTR()</li>
        </ul>
      </li>
      <li>v0.22u
<ul><li>Added string slicing in the form var$[pos] and var$[start TO end]</li><li>Added Bad range error</li><li>Fixed null string causing String too long error when used as an argument in % string substitution</li></ul></li>
      <li>v0.22t (2024-05-15)
<ul><li>Added PAD$ function</li></ul></li>
      <li>v0.22s (2024-05-13)
<ul><li>Added LOAD BITMAP and SAVE BITMAP</li></ul></li>
      <li>v0.22r (2024-05-12)
<ul><li>Added comments starting with apostrophe.</li><li>Fixed silent abort on duplicate line number in LOAD with ASC option.</li></ul></li>
      <li>v0.22q (2024-05-11)
<ul><li>Changed DEF TILE TO CHR to SET TILE TO CHR</li><li>Wrote demo program /pbdemo/chrsprite.bas</li></ul></li>
      <li>v0.22p (2024-05-10)
<ul><li>Added DEF TILE TO CHR and DEF BYTELIST</li></ul></li>
      <li>v0.22o (2024-05-09)
<ul><li>Implemented SAVE SCREEN and LOAD SCREEN statements</li></ul></li>
      <li>v0.22n (2024-05-08)
<ul><li>Added SPLIT command</li></ul></li>
      <li>v0.22m (2024-04-28)
<ul><li>Fixed spaces after escaped string being tokenized.</li></ul></li>
      <li>v0.22l (2024-04-21)
<ul><li>Added INMEM function</li><li>Fixed stomping of temporay string in string trimming functions functions.</li></ul></li>
      <li>v0.22k (2024-03-24)
<ul><li>Added SAVE filespec$,CAQ to override SET SAVE ASC and SAVE filespec$,TOK to save raw tokenized program.</li><li>Updated load_basic_program accordingly</li></ul></li>
      <li>v0.22j (2024-03-20)
<ul><li>Implemented COPY FILE</li></ul></li>
      <li>v0.22i (2024-03-20)
<ul><li>Removed LOAD STRING stub from source and README.md. Add LOAD and SAVE ^var$ to README.md.</li></ul></li>
      <li>v0.22h (2024-03-19)
<ul><li>Single PSET, PRESET, and POINT(), along with underlying routines.</li><li>Single FILL BITMAP and CLEAR BITMAP along with underlying routines.</li><li>Replaced SET BITMAP?? with COLOR, GETBITMAP?? with POSX, POSY, and COLOR</li><li>Bitmap routines use EXT_FLAGS bits to determine</li><li>Added DRAW token, USE SCREEN stub.</li></ul></li>
      <li>v0.22g (2024-03-11)
<ul><li>Added bitmap_read_sysvars, GETBITMAPBC, GETBITMAPBX, and GETBITMAPBY</li><li>Added bitmap_write_color, bitmap_write_xpos, bitmap_write_ypos, and SET BITMAPBC BITMAPBX BITMAPBY</li><li>Added bitmapc_read_sysvars, GETBITMAPCC, GETBITMAPCX, and GETBITMAPCY</li><li>PSETB, PRESETB, POINTB, PSETC, PRESETC, and POINTC update last-x and last-y system variables</li><li>Changed CLEAR BITMAP to CLEAR BITMAPB, matching syntax of other BITMAP keywords</li><li>Added bitmapc_write_color, bitmapc_write_xpos, bitmapc_write_ypos, and SET BITMAPCC BITMAPCX BITMAPCY</li><li>If PSETB color operand not specified, use color from SET BITMAPCC</li><li>Renamed and reorganized several module assembly language files</li><li>Added bitmap_move</li></ul></li>
      <li>v0.22f (2024-03-09)
<ul><li>Implemented PSETC, PRESETC, and POINTC</li><li>Fixed Y-coordinate clipping in PSETB, PRESETB, POTNTB</li></ul></li>
      <li>v0.22e (2024-03-09)
<ul><li>Implemented POINTB(), added CLEAR BITMAPC and FILL BITMAPC</li></ul></li>
      <li>v0.22d (2024-03-08)
<ul><li>Added CLEAR BITMAP, FILL BITMAP.</li><li>Implemented PSETB and PRESETB</li></ul></li>
      <li>v0.22c (2024-03-06)</li>
      <li>v0.22c (2024-03-06)
<ul><li>Fixed syntax error on extended functions VER through VARPTR</li></ul></li>
      <li>v0.22b (2024-03-04)
<ul><li>Added KEY(-1)</li></ul></li>
      <li>v0.22a (2024-03-04)
<ul><li>Added KEY("keys")</li></ul></li>
      <li>v0.22 (2024-03-04)
<ul><li>Added PT3STATUS, PT3LOOP, SET PT3 ON/OFF and fixed PAUSE PT3 while PT3 LOOP is active</li></ul></li>
      <li>v0.21z (2024-03-01)
<ul><li>Added pseudovariable ARGS and ARGS$(0)</li></ul></li>
      <li>v0.21y (2024-02-25)
<ul><li>Added SWAP VARS statement, ERASE statement, MID$ statement, and INDEX() function</li></ul></li>
      <li>v0.21x (2024-02-24)
<ul><li>Added TRIM$, TRIML$, and TRIMR$ functions</li></ul></li>
      <li>v0.21w (2024-02-21)
<ul><li>Added GETCHRSET function</li><li>Improved screen switch/swap</li><li>Fixed 80-column color mode printing</li><li>Tweaked Latin-1 character sets</li></ul></li>
      <li>v0.21v (2024-02-14)
<ul><li>Added LOAD DIR filename$,*array$</li><li>LOAD array$ ASC and LOAD DIR start at array index 1, put number of lines in index 0</li><li>Updated read/write page checking to match new memory structure</li></ul></li>
      <li>v0.21u (2024-02-13)
<ul><li>Added LOAD filename$,*array$,ASC</li></ul></li>
      <li>v0.21s (2024-02-13)
<ul><li>Implemented DEF FNx and FNx</li></ul></li>
      <li>v0.21r (2024-02-13)
<ul><li>Added function INSTR, kernel routine str_instr</li></ul></li>
      <li>v0.21q (2024-02-12)
<ul><li>Added VARPTR() and STRPTR()</li></ul></li>
      <li>v0.20p (2024-02-12)
<ul><li>Replaced SCREEN SAVE, SCREEN RESTORE, and SCREEN SWAP with STASH SCREEN, RESTORE SCREEN, and SWAP SCREEN.</li></ul></li>
      <li>v0.21o (2024-02-12)
<ul><li>Removed character ROM data from sysrom binary, makerom script now does a simple copy with concatenate</li></ul></li>
      <li>v0.21n (2024-02-11)
<ul><li>Fixed 'Unknown error' bug in SAVE paged binary over 32k in length</li></ul></li>
      <li>v0.21m (2024-02-11)
<ul><li>Added MOUSEW</li></ul></li>
      <li>v0.21j (2024-0209)
<ul><li>Added SAVE/LOAD string arrays</li></ul></li>
      <li>v0.21h (2024-02-05)
<ul><li>Modified legal write pages, PLAY SAMPLE allowed pages</li></ul></li>
      <li>v0.21g (2024-02-03)
<ul><li>Reactivated JP descramble_rom in files.asm</li></ul></li>
      <li>v0.21f (2024-02-03)
<ul><li>Loads ptplay.bin from ESP: instead of SD card</li></ul></li>
      <li>v0.21e (2024-01-31)
<ul><li>Added LOOP PT3 [filename]</li></ul></li>
      <li>v0.21c (2024-01-31)
<ul><li>Separated pt3player code into loadable module</li></ul></li>
      <li>v0.21b (2024-01-29)
<ul><li>Load default and Latin-1 character sets from ESP filesystem</li></ul></li>
      <li>v0.21a (2024-01-29)
<ul><li>Added USE CHRSET filename$, changed Ctrl-O to switch to custom chrset, removed Ctrl-P option</li></ul></li>
      <li>v0.21 (2024-01-27)
<ul><li>SYSROM loaded in pages 60 through 62 as SoftROM</li></ul></li>
      <li>v0.20w (2024-01-22)
<ul><li>Fixed tokenization bug when RUNing BASIC progam files in ASCII format</li></ul></li>
      <li>v0.20v (2024-01-21)
<ul><li>Fixed DEF SPRITE [...] x-offset bug</li></ul></li>
      <li>v0.20u (2024-01-18)
<ul><li>Added SET SPRITE var$ TILECLIP and debugged str_length</li></ul></li>
      <li>v0.20s (2024-01-17)
<ul><li>Added <code>GET/PUT TILEMAP ... ^var$</code>, debugged FILL <code>[@page,]address,WORD int</code>, fixed <code>ASC$()</code> bug.</li></ul></li>
      <li>v0.20r (2024-01-16)
<ul><li>Added TRON and TROFF statements and Extended BASIC jump table. Debugged graphics DEF statements.</li></ul></li>
      <li>v0.20q (2024-01-14)
<ul><li>Finalized esp, paged, dos, and file_io jump table entries</li></ul></li>
      <li>v0.20n (2024-01-13)
<ul><li>Added syntax <code>LIST$(NEXT)</code>, replaced all usage of <code>SBUFF</code> in paged memory with <code>STRBUF</code> in main memory</li></ul></li>
      <li>v0.20m (2024-01-11)
<ul><li>Added <code>FILL [@page,] start, count, |byte|WORD int|</code>,  <code>sys_fill_word</code>, tokens <code>VARS</code> and <code>WORD</code></li><li>Fixed spurious <code>FC error</code> in <code>GET SCREEN</code></li><li>Finished <code>GET TILEMAP</code>, <code>PUT_TILEMAP</code>, <code>tilemap_get</code>, and <code>tilemap_put</code></li></ul></li>
      <li>v0.20k (2024-01-08)
<ul><li>Implemented <code>SET TILEMAP (x,y)</code> and <code>tilemap_set_tile</code></li></ul></li>
      <li>v0.20j (2024-01-07)
<ul><li>Allow both <code>,</code> and <code>;</code> as delimiters in <code>DEF INTLIST</code></li><li>Fixed <code>ATTR attrs</code> and <code>PALETTE palette#</code> causing syntax error after <code>FILL TILEMAP tile#</code></li><li><code>.</code> treated as <code>0</code> in hex literal strings and <code>ASC$</code> function</li></ul></li>
      <li>v0.20i (2024-01-06)
<ul><li>Added BASIC functions <code>FILEEXT$()</code>, <code>FILEDIR$()</code>, <code>TRIMDIR$()</code>, <code>TRIMEXT$()</code></li><li>Added kernel routines <code>file_get_ext</code>, <code>file_trim_dir</code>, <code>file_get_dir</code>, <code>file_trim_ext</code></li><li>Allow unquoted filename operand for <code>RUN</code> in direct mode</li><li>Added direct mode syntax <code>DEL file file file...</code></li><li>Added syntax <code>LOAD filename$,@page</code> and <code>SAVE filename$,@page</code></li><li>Added cartridge diagnostic mode assembly option</li></ul></li>
      <li>v0.20h (2024-01-02)
<ul><li>Fixed 8k carts not working</li></ul></li>
      <li>v0.20g (2023-12-30)
<ul><li><code>FILL SCREEN</code>, <code>GET SCREEN</code>, <code>PUT SCREEN</code> now work in both 40 column and 80 column mode</li></ul></li>
      <li>v0.20f (2023-12-30)
<ul><li>Added optional comma between end-coordinate and fill character in <code>FILL SCREEN</code></li></ul></li>
      <li>v0.20e (2023-12-29)
<ul><li>Added <code>KEY()</code> function</li></ul></li>
      <li>v0.20d (2023-12-29)
<ul><li>Added <code>DEC()</code> function, fixed <code>esp_get_version</code>/<code>VER(0)</code>/<code>VER$(0)</code></li></ul></li>
      <li>v0.20c (2023-12-23)
<ul><li>Refactored (and hopefully fixed) cartridge boot code</li></ul></li>
      <li>v0.20b (2023-12-17)
<ul><li>Fixed bug in init_charram</li></ul></li>
      <li>v0.20a (2023-12-17)
<ul><li>Clear BASIC RAM before starting cart. Add IRQ and hook disable, screen reset to hardware cart startup</li></ul></li>
      <li>v0.20u (2023-12-14)
<ul><li>Fixed GETPALETTE$, modded file_load_pt3 to stop any running pt3play process</li></ul></li>
      <li>v0.19t (2023-12-13)
<ul><li>Replaced RESET PT3 with STOP PT3, added PAUSE PT3 and RESUME PT3</li></ul></li>
      <li>v0.19s (2023-12-12)
<ul><li>Fixed CLS when SET COLOR is active</li></ul></li>
      <li>v0.19r (2023-12-12)
<ul><li>Fixed PLAY PT3 and RESET PT3</li></ul></li>
      <li>v0.19q (2023-12-13)
<ul><li>PLAY PT3 fixes</li></ul></li>
      <li>v0.19p (2023-12-11)
<ul><li>implemented PT3 PLAY</li></ul></li>
      <li>v0.19n (2023-12-08)
<ul><li>Added LOAD PALLETE, SAVE PALETTE, RESET PALETTE and RESET SCREEN</li></ul></li>
      <li>v0.19m (2023-12-08)
<ul><li>Fixed routine screen_pos_addr which had broken GET SCREEN and PUT SCREEN</li><li>Implemented LOAD PT3 statement</li></ul></li>
      <li>v0.19j (2023-12-04)
<ul><li>Fixed printing to screen after SET COLOR</li></ul></li>
      <li>v0.19i (2023-12-03)
<ul><li>Converted plusBASIC patches to hooks to increase cartridge compatibility</li></ul></li>
      <li>v0.19h (2023-12-02)
<ul><li>Fixed ?Syntax error when RUNning ROM</li></ul></li>
      <li>v0.19g (2023-12-01)
<ul><li>Added SET SAVE ASC ON/OFF, preset DAC to $80 to eliminate click at begining of first sample</li></ul></li>
      <li>v0.19f (2023-11-29)
<ul><li>Fixed bank 1 not restored after, clicking in play_sample</li></ul></li>
      <li>v0.19e (2023-11-28)
<ul><li>Moved Extended BASIC hook routines into Bank 1 ROM</li></ul></li>
      <li>v0.19d (2023-11-27)
<ul><li>Moved dos and fileio modules into Aux ROM</li></ul></li>
      <li>v0.19c (2023-11-26)
<ul><li>Consolidated 256-byte aligned tables into tables.asm</li><li>Fixed Disk I/O error when trying to LOAD/RUN esp:settings</li></ul></li>
      <li>v0.19b (2023-11-26)
<ul><li>DIR now shows 0B instead of B for zero length files.</li></ul></li>
      <li>v0.19a (2023-11-26)
<ul><li>Added /r and /t escape sequences</li></ul></li>
      <li>v0.19 (2023-11-25)
<ul><li>Added backslash escaped strings</li></ul></li>
      <li>v0.18y (2023-11-24)
<ul><li>LOAD and RUN now autodect CAQ vs ASCII when loading BASIC programs. Removed ,ASC option from LOAD.</li></ul></li>
      <li>v0.18x (2023-11-24)
<ul><li>Added SAVE file$,ASC</li></ul></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li>v0.13h (2023-10-01)
<ul><li>Added ESP write protect error reporting</li></ul></li>
      <li>v0.13g (2023-09-30)
<ul><li>Changed SCREEN SET filename$ to call new routine dos_load_charram</li></ul></li>
      <li>v0.13f (2023-09-30)
<ul><li>Added SCREEN SET filename$</li></ul></li>
      <li>v0.13e (2023-09-30)
<ul><li>Added character set switchng</li></ul></li>
      <li>v0.13d (2023-09-30)
<ul><li>S3BASIC boot screen calls read_key_ascii through vector at $2012</li></ul></li>
      <li>v0.13c (2023-09-28)
<ul><li>activated key read from port $FA</li></ul></li>
      <li>v0.13a (2023-09-27)
<ul><li>Added HOOK18 handler to read keyboard.</li></ul></li>
      <li>v0.13 (2023-09-26)
<ul><li>Added COPY! statement, page_fast_copy; renamed existing fast page routines</li></ul></li>
      <li>v0.12s (2023-09-26)
<ul><li>Fixed esp_get_mouse after fixing DIR date and time</li></ul></li>
      <li>v0.12r (2023-09-26)
<ul><li>Fixed date and time display in DIR, mapped PgUp, PgDn, Home, End to shifted cursor keys</li></ul></li>
      <li>v0.12q (2023-09-25)
<ul><li>MOUSE functions, esp routine return -1 when no mouse is found instead of ?Not found error</li></ul></li>
      <li>v0.12q (2023-09-25)
<ul><li>Fixed SCREEN statement, screen_set_mode routine</li></ul></li>
      <li>v0.12p (2023-09-24)
<ul><li>Moved text screen restore to READY hook. Enabled SET SCREEN OFFSET</li></ul></li>
      <li>v0.12m (2023-09-24)
<ul><li>Modified S3BASIC and plusBASIC to revert to text only after Ctrl-C, STOP, or END</li></ul></li>
      <li>v0.12l (2023-09-23)
<ul><li>Added ASC$(hex$)</li></ul></li>
      <li>0.12k (2023-09-23)
<ul><li>Added PEEK$([@page], addr, len)</li></ul></li>
    </ul>
  </body>
</html>
