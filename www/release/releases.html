<!DOCTYPE html []>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="author" content="MarkdownViewer++" />
    <title>releases.md</title>
    <style type="text/css">
            
/* Avoid page breaks inside the most common attributes, especially for exports (i.e. PDF) */
td, h1, h2, h3, h4, h5, p, ul, ol, li {
    page-break-inside: avoid; 
}

        </style>
  </head>
  <body>
    <h1 id="plusbasic-release-history">plusBASIC Release History</h1>
    <ul>
      <li>v0.22y
<ul><li>Breaking changes
<ul><li><code>FILL {@page},address,oount,byte</code> is now <code>FILL BYTE {@page}, address, oount, byte</code></li><li><code>FILL {@page},address,oount,WORD integer</code> is now <code>FILL WORD {@page}, address, count, integer</code></li><li><code>LOAD COLOR</code> is now <code>LOAD SCREEN ATTR</code></li><li><code>LOAD DIR ... \*array</code> now loads filenames only</li><li><code>LOAD DIR ... *array$,BIN</code> replaces old <code>LOAD DIR ... \*array</code></li><li><code>SAVE filespec$,TOK</code> to <code>SAVE filespec$,BIN</code>.</li></ul></li><li>New statements and functions
<ul><li><code>APPEND filespec$,^var$</code></li><li><code>BIT(val,bit#)</code></li><li><code>COPY SCREEN TO @page,address</code></li><li><code>FILL COLORMAP</code></li><li><code>JOY$()</code></li><li><code>PT3FAST</code></li><li><code>SET FILE ERROR ON/OFF</code></li><li><code>SET PT3 FAST ON/OFF</code></li></ul></li><li>Updated statements and functions
<ul><li><code>ATN</code> implemented.</li><li><code>FRE(_option_)</code></li><li><code>CLEAR CURSOR</code></li><li><code>FRE(_option_)</code><ul><li>-1 - Returns the number of bytes in memory not being used by BASlC as unsigned int.</li><li>0 - Returns the number of bytes in memory not being used by BASlC as signed int.</li><li>1 - Returns the total size of string space (as set by the first argument of CLEAR).</li><li>2 - Returns the top of BAexSIC memory (as set by the second argument of CLEAR).</li><li>"" - Garbage collect and return free string space</li></ul></li><li><code>INPUT (_col_,_row_),_minlen_,_maxlen_,INT _var_</code></li><li><code>LOAD CHRSET</code><ul><li>768 byte file loads to characters 32 to 127 (standard ASCII printable)</li><li>1024 byte file loads to characters 128 to 255 (high ASCII)</li><li>2048 byte file loads entire character set</li></ul></li><li><code>LOAD DIR ... *array$,ASC</code> loads formatted directory</li></ul></li><li>Operational changes
<ul><li><code>CLEAR</code>, <code>NEW</code>, and <code>RUN</code> close all files</li><li><code>LOAD filespec,@page,address</code> now load more than 64k</li><li><code>LOAD BITMAP</code> generates Error 49 if file size does not exactly match one of the supported formats.</li><li><code>LOAD</code> basic program sets FILE ERROR ON</li><li><code>LOAD</code> binary closes file</li><li>Renamed <code>Disk I/O error</code> to <code>I/O error</code></li></ul></li><li>Statements and functions now respecting SET FILE ERROR OFF
<ul><li><code>LOAD FNKEYS</code></li><li><code>SAVE/LOAD PALETTE</code></li><li><code>LOAD</code> string</li><li><code>LOAD</code> array</li><li><code>LOAD DIR</code></li><li><code>DEL</code></li><li><code>MKDIR</code></li><li><code>CD</code> and <code>CD$</code></li></ul></li><li>Bug fixes
<ul><li>Syntax error on <code>LOAD filespec$,@page :</code></li><li>Syntax error in <code>SET SPRITE ... PALETTE</code></li></ul></li><li>Added unit test front end <code>au.bas</code>, chained unit test programs</li><li>Updated unit test framework an unit tests</li><li>Restricted kernel page writes to not write past USER_END.</li><li>System IRQ handler now preserves all registers</li></ul></li>
      <li>v0.22x4
<ul><li>Added LOAD TILESET and SAVE TILESET</li></ul></li>
      <li>v0.22x
<ul><li>Added SET CHRDEF, GETCHRDEF$(), and SAVE CHRSET</li><li>Fixed characters 128 - 255 of default character set being overridden</li><li>INPUT and READ now parse hexademical numbers</li><li>Added DIM var()=list, READ *var</li></ul></li>
      <li>v0.22w
<ul><li>Added WAIT, SET BREAK ON/OFF</li><li>Implemented RGB(), DEF USR</li><li>Added syntax OUT port,byte|string$;port,byte|string$...</li><li>Syntax {@page,}address,byte;... to POKE, POKE COLOR, POKE SCREEN, and DOKE</li></ul></li>
      <li>
        <ul>
          <li>^ operator string substition gives Missing or Too many operands errors.
v0.22v</li>
          <li>Added JOIN statement</li>
          <li>Added CLEAR *array</li>
          <li>All statements that write to multiple elements of string array, first zero out the array contents, then do a garbage collecion.</li>
          <li>Fixed DIM causes Syntax error after VARPTR()</li>
        </ul>
      </li>
      <li>v0.22u
<ul><li>Added string slicing in the form var$[pos] and var$[start TO end]</li><li>Added Bad range error</li><li>Fixed null string causing String too long error when used as an argument in % string substitution</li></ul></li>
      <li>v0.22t
<ul><li>Added PAD$ function</li></ul></li>
      <li>v0.22s
<ul><li>Added LOAD BITMAP and SAVE BITMAP</li></ul></li>
      <li>v0.22r
<ul><li>Added comments starting with apostrophe.</li><li>Fixed silent abort on duplicate line number in LOAD with ASC option.</li></ul></li>
      <li>v0.22q
<ul><li>Changed DEF TILE TO CHR to SET TILE TO CHR</li><li>Wrote demo program /pbdemo/chrsprite.bas</li></ul></li>
      <li>v0.22p
<ul><li>Added DEF TILE TO CHR and DEF BYTELIST</li></ul></li>
      <li>v0.22o
<ul><li>Implemented SAVE SCREEN and LOAD SCREEN statements</li></ul></li>
      <li>v0.22n
<ul><li>Added SPLIT command</li></ul></li>
      <li>v0.22m
<ul><li>Fixed spaces after escaped string being tokenized.</li></ul></li>
      <li>v0.22l
<ul><li>Added INMEM function</li><li>Fixed stomping of temporay string in string trimming functions functions.</li></ul></li>
      <li>v0.22k
<ul><li>Added SAVE filespec$,CAQ to override SET SAVE ASC and SAVE filespec$,TOK to save raw tokenized program.</li><li>Updated load_basic_program accordingly</li></ul></li>
      <li>v0.22j
<ul><li>Implemented COPY FILE</li></ul></li>
      <li>v0.22i
<ul><li>Removed LOAD STRING stub from source and README.md. Add LOAD and SAVE ^var$ to README.md.</li></ul></li>
      <li>v0.22h
<ul><li>Single PSET, PRESET, and POINT(), along with underlying routines.</li><li>Single FILL BITMAP and CLEAR BITMAP along with underlying routines.</li><li>Replaced SET BITMAP?? with COLOR, GETBITMAP?? with POSX, POSY, and COLOR</li><li>Bitmap routines use EXT_FLAGS bits to determine</li><li>Added DRAW token, USE SCREEN stub.</li></ul></li>
      <li>v0.22g
<ul><li>Added bitmap_read_sysvars, GETBITMAPBC, GETBITMAPBX, and GETBITMAPBY</li><li>Added bitmap_write_color, bitmap_write_xpos, bitmap_write_ypos, and SET BITMAPBC BITMAPBX BITMAPBY</li><li>Added bitmapc_read_sysvars, GETBITMAPCC, GETBITMAPCX, and GETBITMAPCY</li><li>PSETB, PRESETB, POINTB, PSETC, PRESETC, and POINTC update last-x and last-y system variables</li><li>Changed CLEAR BITMAP to CLEAR BITMAPB, matching syntax of other BITMAP keywords</li><li>Added bitmapc_write_color, bitmapc_write_xpos, bitmapc_write_ypos, and SET BITMAPCC BITMAPCX BITMAPCY</li><li>If PSETB color operand not specified, use color from SET BITMAPCC</li><li>Renamed and reorganized several module assembly language files</li></ul></li>
      <li>v0.22f1
<ul><li>Added bitmap_move</li></ul></li>
      <li>v0.22f
<ul><li>Implemented PSETC, PRESETC, and POINTC</li></ul></li>
      <li>v0.22e2
<ul><li>Fixed Y-coordinate clipping in PSETB, PRESETB, POTNTB</li></ul></li>
      <li>v0.22e
<ul><li>Implemented POINTB(), added CLEAR BITMAPC and FILL BITMAPC</li></ul></li>
      <li>v0.22d
<ul><li>Added CLEAR BITMAP, FILL BITMAP.</li><li>Implemented PSETB and PRESETB</li></ul></li>
      <li>v0.22c
<ul><li>Fixed syntax error on extended functions VER through VARPTR</li></ul></li>
      <li>v0.22b
<ul><li>Added KEY(-1)</li></ul></li>
      <li>v0.22a
<ul><li>Added KEY("keys")</li></ul></li>
      <li>v0.22
<ul><li>Added PT3STATUS, PT3LOOP, SET PT3 ON/OFF and fixed PAUSE PT3 while PT3 LOOP is active</li></ul></li>
      <li>v0.21z
<ul><li>Added pseudovariable ARGS and ARGS$(0)</li></ul></li>
      <li>v0.21y
<ul><li>Added SWAP VARS statement, ERASE statement, MID$ statement, and INDEX() function</li></ul></li>
      <li>v0.21x
<ul><li>Added TRIM$, TRIML$, and TRIMR$ functions</li></ul></li>
      <li>v0.21w
<ul><li>Added GETCHRSET function</li><li>Improved screen switch/swap</li><li>Fixed 80-column color mode printing</li><li>Tweaked Latin-1 character sets</li></ul></li>
      <li>v0.21v
<ul><li>Added LOAD DIR filename$,*array$</li><li>LOAD array$ ASC and LOAD DIR start at array index 1, put number of lines in index 0</li><li>Updated read/write page checking to match new memory structure</li></ul></li>
      <li>v0.21u
<ul><li>Added LOAD filename$,*array$,ASC</li></ul></li>
      <li>v0.21s
<ul><li>Implemented DEF FNx and FNx</li></ul></li>
      <li>v0.21r
<ul><li>Added function INSTR, kernel routine str_instr</li></ul></li>
      <li>v0.21q
<ul><li>Added VARPTR() and STRPTR()</li></ul></li>
      <li>v0.20p
<ul><li>Replaced SCREEN SAVE, SCREEN RESTORE, and SCREEN SWAP with STASH SCREEN, RESTORE SCREEN, and SWAP SCREEN.</li></ul></li>
      <li>v0.21o
<ul><li>Removed character ROM data from sysrom binary, makerom script now does a simple copy with concatenate</li></ul></li>
      <li>v0.21n
<ul><li>Fixed 'Unknown error' bug in SAVE paged binary over 32k in length</li></ul></li>
      <li>v0.21m
<ul><li>Added MOUSEW</li></ul></li>
      <li>v0.21j -
<ul><li>Added SAVE/LOAD string arrays</li></ul></li>
      <li>v0.21h
<ul><li>Modified legal write pages, PLAY SAMPLE allowed pages</li></ul></li>
      <li>v0.21g
<ul><li>Reactivated JP descramble_rom in files.asm</li></ul></li>
      <li>v0.21f
<ul><li>Loads ptplay.bin from ESP: instead of SD card</li></ul></li>
      <li>v0.21e
<ul><li>Added LOOP PT3 [filename]</li></ul></li>
      <li>v0.21b
<ul><li>Load default and Latin-1 character sets from ESP filesystem</li></ul></li>
      <li>v0.21a
<ul><li>Added USE CHRSET filename$, changed Ctrl-O to switch to custom chrset, removed Ctrl-P option</li></ul></li>
      <li>v0.21
<ul><li>SYSROM loaded in pages 60 through 62 as SoftROM</li></ul></li>
      <li>v0.20w
<ul><li>Fixed tokenization bug when RUNing BASIC progam files in ASCII format</li></ul></li>
      <li>v0.20v
<ul><li>Fixed DEF SPRITE [...] x-offset bug</li></ul></li>
      <li>v0.20u
<ul><li>Added SET SPRITE var$ TILECLIP and debugged str_length</li></ul></li>
      <li>v0.20s
<ul><li>Added <code>GET/PUT TILEMAP ... ^var$</code>, debugged FILL <code>[@page,]address,WORD int</code>, fixed <code>ASC$()</code> bug.</li></ul></li>
      <li>v0.20r
<ul><li>Added TRON and TROFF statements and Extended BASIC jump table. Debugged graphics DEF statements.</li></ul></li>
      <li>v0.20q
<ul><li>Finalized esp, paged, dos, and file_io jump table entries</li></ul></li>
      <li>v0.20n
<ul><li>Added syntax <code>LIST$(NEXT)</code>, replaced all usage of <code>SBUFF</code> in paged memory with <code>STRBUF</code> in main memory</li></ul></li>
      <li>v0.20m
<ul><li>Added <code>FILL [@page,] start, count, |byte|WORD int|</code>,  <code>sys_fill_word</code>, tokens <code>VARS</code> and <code>WORD</code></li><li>Fixed spurious <code>FC error</code> in <code>GET SCREEN</code></li><li>Finished <code>GET TILEMAP</code>, <code>PUT_TILEMAP</code>, <code>tilemap_get</code>, and <code>tilemap_put</code></li></ul></li>
      <li>v0.20k
<ul><li>Implemented <code>SET TILEMAP (x,y)</code> and <code>tilemap_set_tile</code></li></ul></li>
      <li>v0.20j
<ul><li>Allow both <code>,</code> and <code>;</code> as delimiters in <code>DEF INTLIST</code></li><li>Fixed <code>ATTR attrs</code> and <code>PALETTE palette#</code> causing syntax error after <code>FILL TILEMAP tile#</code></li><li><code>.</code> treated as <code>0</code> in hex literal strings and <code>ASC$</code> function</li></ul></li>
      <li>v0.20i
<ul><li>Added BASIC functions <code>FILEEXT$()</code>, <code>FILEDIR$()</code>, <code>TRIMDIR$()</code>, <code>TRIMEXT$()</code></li><li>Added kernel routines <code>file_get_ext</code>, <code>file_trim_dir</code>, <code>file_get_dir</code>, <code>file_trim_ext</code></li><li>Allow unquoted filename operand for <code>RUN</code> in direct mode</li><li>Added direct mode syntax <code>DEL file file file...</code></li><li>Added syntax <code>LOAD filename$,@page</code> and <code>SAVE filename$,@page</code></li><li>Added cartridge diagnostic mode assembly option</li></ul></li>
      <li>v0.20h
<ul><li>Fixed 8k carts not working</li></ul></li>
      <li>v0.20g
<ul><li><code>FILL SCREEN</code>, <code>GET SCREEN</code>, <code>PUT SCREEN</code> now work in both 40 column and 80 column mode</li></ul></li>
      <li>v0.20f
<ul><li>Added optional comma between end-coordinate and fill character in <code>FILL SCREEN</code></li></ul></li>
      <li>v0.20e
<ul><li>Added <code>KEY()</code> function</li></ul></li>
      <li>v0.20d
<ul><li>Added <code>DEC()</code> function, fixed <code>esp_get_version</code>/<code>VER(0)</code>/<code>VER$(0)</code></li></ul></li>
      <li>v0.20c - Refactored (and hopefully fixed) cartridge boot code</li>
      <li>v0.20b - Fixed bug in init_charram</li>
      <li>v0.20a
<ul><li>Clear BASIC RAM before starting cart. Add IRQ and hook disable, screen reset to hardware cart startup</li></ul></li>
      <li>v0.20u
<ul><li>Fixed GETPALETTE$, modded file_load_pt3 to stop any running pt3play process</li></ul></li>
      <li>v0.19t
<ul><li>Replaced RESET PT3 with STOP PT3, added PAUSE PT3 and RESUME PT3</li></ul></li>
      <li>v0.19s
<ul><li>Fixed CLS when SET COLOR is active</li></ul></li>
      <li>v0.19r
<ul><li>Fixed PLAY PT3 and RESET PT3</li></ul></li>
      <li>v0.19q
<ul><li>PLAY PT3 fixes</li></ul></li>
      <li>v0.19p
<ul><li>implemented PT3 PLAY</li></ul></li>
      <li>v0.19n
<ul><li>Added LOAD PALLETE, SAVE PALETTE, RESET PALETTE and RESET SCREEN</li></ul></li>
      <li>v0.19m
<ul><li>Fixed routine screen_pos_addr which had broken GET SCREEN and PUT SCREEN</li><li>Implemented LOAD PT3 statement</li></ul></li>
      <li>v0.19j
<ul><li>Fixed printing to screen after SET COLOR</li></ul></li>
      <li>v0.19i
<ul><li>Converted plusBASIC patches to hooks to increase cartridge compatibility</li></ul></li>
      <li>v0.19h
<ul><li>Fixed ?Syntax error when RUNning ROM</li></ul></li>
      <li>v0.19g
<ul><li>Added SET SAVE ASC ON/OFF, preset DAC to $80 to eliminate click at begining of first sample</li></ul></li>
      <li>v0.19f
<ul><li>Fixed bank 1 not restored after, clicking in play_sample</li></ul></li>
    </ul>
  </body>
</html>
